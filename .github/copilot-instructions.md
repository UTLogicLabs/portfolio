# AI Coding Agent Instructions

## Project Overview

This is a personal portfolio website for Joshua Dix built with React, Vite, and Tailwind CSS. The project uses ES modules (`"type": "module"` in package.json) and follows modern JavaScript/web development practices.

## Tech Stack

- **Framework**: React with TypeScript (TSX)
- **Build Tool**: Vite
- **Styling**: Tailwind CSS
- **Icons**: @radix-ui/icons via @sly-cli/sly, with vite-plugin-icons-spritesheet for optimization
- **Code Quality**: ESLint + Prettier + TypeScript
- **Module System**: ES modules only - use `import/export` syntax, not CommonJS

## Development Setup

- **Author**: Joshua Dix <josh.dix@theblindman.com>
- **Node.js/npm**: Standard package management via `package.json`

## Project Structure Patterns

Since this is a new project, establish these conventions:

### Directory Structure

```
src/
  components/     # Reusable React components
    ui/           # Base UI components (buttons, cards, etc.)
    layout/       # Layout components (header, footer, navigation)
    forms/        # Form components (contact forms)
  pages/          # Page components (About, Projects, Blog, Contact)
  hooks/          # Custom React hooks
  utils/          # Utility functions and helpers
  types/          # TypeScript type definitions
  styles/         # Global CSS and Tailwind customizations
  assets/         # Images, fonts, static files
public/           # Static assets served directly
  icons/          # Icon spritesheet generated by vite-plugin-icons-spritesheet
tests/            # Test files
docs/             # Documentation
```

### File Naming

- Use PascalCase for React components: `ProjectCard.tsx`, `BlogPost.tsx`
- Use kebab-case for non-component files: `api-client.ts`, `theme-utils.ts`
- Use `.tsx` extension for React components, `.ts` for utilities and types
- Prefix test files with the component name: `ProjectCard.test.tsx`
- Type definition files: `types.ts`, `api-types.ts`

## Coding Conventions

### React/TypeScript

```typescript
// ✅ Good - React component with TypeScript
import { useState } from 'react';
import { ChevronDownIcon } from '@radix-ui/icons';
import './ProjectCard.css';

interface ProjectCardProps {
  title: string;
  description: string;
  tags?: string[];
}

export function ProjectCard({ title, description, tags }: ProjectCardProps) {
  const [isExpanded, setIsExpanded] = useState<boolean>(false);
  // component logic
}

// ❌ Avoid - CommonJS syntax
const React = require('react');
```

### Tailwind CSS

- Use Tailwind utility classes for styling
- Create custom CSS only for complex animations or unique layouts
- Use CSS custom properties for theme values (dark/light mode)
- Prefer responsive design with Tailwind's responsive prefixes (`sm:`, `md:`, `lg:`)

### Icons

```typescript
// ✅ Good - Import icons from @radix-ui/icons
import { GitHubLogoIcon, LinkedInLogoIcon } from '@radix-ui/icons';

// Icons are optimized via vite-plugin-icons-spritesheet
// Install new icons via: sly add <icon-name>
```

### TypeScript

- Define interfaces for component props and data structures
- Use type-safe event handlers and state management
- Leverage TypeScript's strict mode for better code quality
- Create shared types in `src/types/` directory

## Testing Strategy

**Target**: 95% test coverage across all components and server functions

### Frontend Testing - Playwright

```typescript
// Component test example
import { test, expect } from '@playwright/test';

test.describe('ProjectCard Component', () => {
  test('should render project details correctly', async ({ page }) => {
    await page.goto('/projects');
    await expect(page.locator('[data-testid="project-card"]')).toBeVisible();
    await expect(page.locator('h3')).toContainText('Project Title');
  });

  test('should filter projects by technology', async ({ page }) => {
    await page.goto('/projects');
    await page.click('[data-testid="filter-react"]');
    await expect(page.locator('[data-testid="project-card"]')).toHaveCount(3);
  });
});
```

### Server/API Testing - Vitest + Supertest

For server functions and API endpoints:

```typescript
// API route test example
import { describe, it, expect } from 'vitest';
import request from 'supertest';
import { app } from '../src/server';

describe('Contact Form API', () => {
  it('should validate required fields', async () => {
    const response = await request(app)
      .post('/api/contact')
      .send({ email: 'test@example.com' }); // missing name

    expect(response.status).toBe(400);
    expect(response.body.errors).toContain('name is required');
  });

  it('should send email successfully', async () => {
    const response = await request(app)
      .post('/api/contact')
      .send({ name: 'John Doe', email: 'john@example.com', message: 'Hello' });

    expect(response.status).toBe(200);
    expect(response.body.success).toBe(true);
  });
});
```

### Unit Testing - Vitest + React Testing Library

For isolated component logic:

```typescript
// Unit test example
import { render, screen, fireEvent } from '@testing-library/react';
import { describe, it, expect } from 'vitest';
import { ThemeToggle } from '../components/ui/ThemeToggle';

describe('ThemeToggle', () => {
  it('should toggle between light and dark themes', () => {
    render(<ThemeToggle />);
    const toggleButton = screen.getByRole('button');

    fireEvent.click(toggleButton);
    expect(document.documentElement).toHaveClass('dark');

    fireEvent.click(toggleButton);
    expect(document.documentElement).not.toHaveClass('dark');
  });
});
```

### Test File Organization

```
tests/
  e2e/              # Playwright end-to-end tests
    pages/          # Page-level tests
    components/     # Component interaction tests
    workflows/      # User journey tests
  unit/             # Vitest unit tests
    components/     # Component logic tests
    utils/          # Utility function tests
    hooks/          # Custom hook tests
  integration/      # API and server function tests
    api/            # API endpoint tests
    services/       # Service layer tests
  fixtures/         # Test data and mocks
  setup/            # Test configuration and setup files
```

### Testing Best Practices

- **Data Test IDs**: Use `data-testid` attributes for reliable element selection
- **Mock External APIs**: Use MSW (Mock Service Worker) for API mocking
- **Visual Testing**: Playwright screenshots for UI regression testing
- **Accessibility Testing**: Include a11y checks in component tests
- **Performance Testing**: Lighthouse CI integration for performance metrics
- **Coverage Thresholds**: Enforce 95% coverage in CI/CD pipeline

## Development Workflow

### Scripts to Add

When extending package.json, use these patterns:

```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint src/ --ext .ts,.tsx",
    "lint:fix": "eslint src/ --ext .ts,.tsx --fix",
    "type-check": "tsc --noEmit",
    "format": "prettier --write src/",
    "icons": "sly add",
    "test": "vitest run",
    "test:watch": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest run --coverage",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:e2e:debug": "playwright test --debug",
    "test:all": "npm run test:coverage && npm run test:e2e"
  }
}
```

### Portfolio-Specific Features

This portfolio includes:

- **Blog/Writing Section**: Markdown-based posts with filtering and categories
- **Project Showcases**: Interactive project cards with filtering by technology
- **Contact Forms**: Form handling with validation and submission
- **Dark/Light Theme**: Theme switching with Tailwind CSS and CSS custom properties
- **Icon System**: Optimized icon spritesheet via vite-plugin-icons-spritesheet

### Performance & Quality

- **Bundle Optimization**: Vite handles code splitting and tree shaking
- **Icon Optimization**: Icons bundled into spritesheet for faster loading
- **Theme System**: CSS custom properties for efficient theme switching
- **Responsive Design**: Mobile-first approach with Tailwind breakpoints

## Key Files to Create

- `index.html` - Main entry point
- `src/main.tsx` - React application entry point
- `src/App.tsx` - Root React component
- `src/styles/globals.css` - Global styles and Tailwind imports
- `vite.config.ts` - Vite configuration with plugins
- `tailwind.config.js` - Tailwind CSS configuration
- `tsconfig.json` - TypeScript configuration
- `vitest.config.ts` - Vitest test configuration
- `playwright.config.ts` - Playwright test configuration
- `eslint.config.js` - ESLint configuration
- `prettier.config.js` - Prettier configuration
- `README.md` - Project documentation
- `.gitignore` - Standard Node.js/React gitignore

## Required Dependencies

```json
{
  "dependencies": {
    "react": "^18.x",
    "react-dom": "^18.x",
    "@radix-ui/icons": "^1.x"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.x",
    "vite": "^5.x",
    "typescript": "^5.x",
    "@types/react": "^18.x",
    "@types/react-dom": "^18.x",
    "tailwindcss": "^3.x",
    "postcss": "^8.x",
    "autoprefixer": "^10.x",
    "eslint": "^8.x",
    "@typescript-eslint/eslint-plugin": "^6.x",
    "@typescript-eslint/parser": "^6.x",
    "prettier": "^3.x",
    "@sly-cli/sly": "^1.x",
    "vite-plugin-icons-spritesheet": "^1.x",
    "vitest": "^1.x",
    "@vitest/coverage-v8": "^1.x",
    "@vitest/ui": "^1.x",
    "@testing-library/react": "^14.x",
    "@testing-library/jest-dom": "^6.x",
    "@testing-library/user-event": "^14.x",
    "@playwright/test": "^1.x",
    "supertest": "^6.x",
    "@types/supertest": "^6.x",
    "msw": "^2.x"
  }
}

## External Integrations

When adding dependencies, prefer:

- **Build tools**: Vite (fast, modern)
- **Styling**: CSS custom properties or Tailwind
- **Deployment**: Netlify, Vercel, or GitHub Pages
- **Forms**: Netlify Forms or similar JAMstack solutions

## Quality Standards

- Keep bundle sizes minimal for portfolio sites
- Ensure fast loading times (< 3s on mobile)
- Use progressive enhancement principles
- Test across browsers and devices
```
